"use strict";(()=>{var e={};e.id=197,e.ids=[197],e.modules={30517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},20266:(e,s,r)=>{r.r(s),r.d(s,{headerHooks:()=>w,originalPathname:()=>_,patchFetch:()=>k,requestAsyncStorage:()=>u,routeModule:()=>p,serverHooks:()=>h,staticGenerationAsyncStorage:()=>l,staticGenerationBailout:()=>g});var i={};r.r(i),r.d(i,{POST:()=>d});var t=r(67097),a=r(91923),o=r(33077),n=r(2739);let c={"Passing Yards":"passing touchdown throw","Passing Touchdowns":"passing touchdown","Rushing Yards":"rushing run carry","Rushing Touchdowns":"rushing touchdown run","Receiving Yards":"catch reception receiving","Receiving Touchdowns":"receiving touchdown catch",Interceptions:"interception turnover"};async function d(e){let s=await e.json().catch(()=>({})),{query:r,player:i,gameId:t,propType:a,limit:o=6}=s,d=process.env.TWELVELABS_INDEX_ID,p=process.env.TL_API_KEY||process.env.TWELVELABS_API_KEY;if(!d||!p){let e=[];return"illinois-usc-20250927"===t?i?.toLowerCase().includes("altmyer")||r?.toLowerCase().includes("altmyer")?e.push({id:"altmyer_pass_1",start:0,end:15,confidence:.92,src:"data:video/mp4;base64,AAAAHGZ0eXBtcDQyAAACAGlzb21pc28yYXZjMW1wNDE=",keywords:["altmyer","passing","touchdown"]},{id:"altmyer_pass_2",start:0,end:12,confidence:.88,src:"data:video/mp4;base64,AAAAHGZ0eXBtcDQyAAACAGlzb21pc28yYXZjMW1wNDE=",keywords:["altmyer","passing","yards"]},{id:"altmyer_pass_3",start:5,end:18,confidence:.91,src:"data:video/mp4;base64,AAAAHGZ0eXBtcDQyAAACAGlzb21pc28yYXZjMW1wNDE=",keywords:["altmyer","passing","completion"]}):i?.toLowerCase().includes("feagin")||r?.toLowerCase().includes("feagin")?e.push({id:"feagin_rush_1",start:0,end:10,confidence:.85,src:"/api/video/mock/feagin_rush_1",keywords:["feagin","rushing","yards"]},{id:"feagin_catch_1",start:0,end:8,confidence:.82,src:"/api/video/mock/feagin_catch_1",keywords:["feagin","receiving","catch"]}):(i?.toLowerCase().includes("bowick")||r?.toLowerCase().includes("bowick"))&&e.push({id:"bowick_catch_1",start:0,end:8,confidence:.87,src:"/api/video/mock/bowick_catch_1",keywords:["bowick","receiving","catch"]},{id:"bowick_route_1",start:2,end:12,confidence:.84,src:"/api/video/mock/bowick_route_1",keywords:["bowick","receiving","route"]}):"gt-wake-forest-20250927"===t&&(i?.toLowerCase().includes("king")||r?.toLowerCase().includes("king"))&&e.push({id:"king_pass_1",start:0,end:14,confidence:.93,src:"/api/video/mock/king_pass_1",keywords:["king","passing","touchdown"]},{id:"king_rush_1",start:0,end:11,confidence:.89,src:"/api/video/mock/king_rush_1",keywords:["king","rushing","yards"]}),n.Z.json({clips:e})}let u=r;if(!u&&i&&a){let e=c[a]||a.toLowerCase();u=`${i} ${e}`}else u||(u=i);if(!u)return n.Z.json({clips:[]});try{let e=await fetch(`https://api.twelvelabs.io/v1.2/indexes/${d}/search`,{method:"POST",headers:{Authorization:`Bearer ${p}`,"Content-Type":"application/json"},body:JSON.stringify({query_text:u,page_limit:Math.min(o,12)}),cache:"no-store"});if(!e.ok){let s=await e.text();return n.Z.json({error:"Search failed",detail:s},{status:e.status})}let s=await e.json(),r=s?.results||s?.data||[],i=r.map(e=>({id:e.clip_id,start:e.start,end:e.end,confidence:e.confidence??0,src:e.video_url?`/api/video/clip/${e.clip_id}`:"",keywords:e.keywords||[]}));return n.Z.json({clips:i})}catch(e){return console.error("TwelveLabs search error",e),n.Z.json({error:"Unhandled error performing search"},{status:500})}}let p=new t.AppRouteRouteModule({definition:{kind:a.x.APP_ROUTE,page:"/api/clips/search/route",pathname:"/api/clips/search",filename:"route",bundlePath:"app/api/clips/search/route"},resolvedPagePath:"C:\\Users\\akash\\Documents\\propsage\\apps\\web\\src\\app\\api\\clips\\search\\route.ts",nextConfigOutput:"",userland:i}),{requestAsyncStorage:u,staticGenerationAsyncStorage:l,serverHooks:h,headerHooks:w,staticGenerationBailout:g}=p,_="/api/clips/search/route";function k(){return(0,o.patchFetch)({serverHooks:h,staticGenerationAsyncStorage:l})}}};var s=require("../../../../webpack-runtime.js");s.C(e);var r=e=>s(s.s=e),i=s.X(0,[102,375],()=>r(20266));module.exports=i})();