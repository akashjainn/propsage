"use strict";(()=>{var e={};e.id=795,e.ids=[795],e.modules={30517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},50358:e=>{e.exports=require("fs")},71017:e=>{e.exports=require("path")},38593:(e,t,s)=>{s.r(t),s.d(t,{headerHooks:()=>w,originalPathname:()=>C,patchFetch:()=>j,requestAsyncStorage:()=>y,routeModule:()=>f,serverHooks:()=>k,staticGenerationAsyncStorage:()=>b,staticGenerationBailout:()=>v});var a={};s.r(a),s.d(a,{GET:()=>_,dynamic:()=>u});var i=s(67097),n=s(91923),o=s(33077),r=s(2739),l=s(50358),c=s.n(l),d=s(71017),p=s.n(d),g=s(72512);let u="force-dynamic";async function h(e){let{player:t,stat:s,limit:a=10}=e,i=new URL("/cfb/clips","http://localhost:4000");t&&i.searchParams.set("player",t),s&&i.searchParams.set("stat",s),i.searchParams.set("limit",String(a));let n=await fetch(i.toString(),{headers:{Accept:"application/json"},signal:AbortSignal.timeout(1e4)});if(!n.ok)throw Error(`Backend API error: ${n.status}`);let o=await n.json();return{clips:o.clips||[],total:o.total||0,source:"twelvelabs"}}async function _(e){let{searchParams:t}=new URL(e.url),s=t.get("player")||"",a=t.get("stat")||"",i=parseInt(t.get("limit")||"6");if(console.log(`[Clips API] Looking for: player="${s}", stat="${a}"`),process.env.TL_API_KEY&&process.env.TWELVELABS_INDEX_ID)try{console.log("[Clips API] Using TwelveLabs search");let e=await h({player:s,stat:a,limit:i});if(e.clips.length>0)return r.Z.json({clips:e.clips,total:e.total,cached:!1,source:"twelvelabs",indexStatus:"ready",poweredBy:"TwelveLabs Video Intelligence"});console.log("[Clips API] TwelveLabs returned no results, falling back to mock")}catch(e){console.error("[Clips API] TwelveLabs error:",e),console.log("[Clips API] Falling back to mock data")}try{let e=function(){try{let e=[p().join(process.cwd(),"../../api/data/twelvelabs.mock.json"),p().join(process.cwd(),"../api/data/twelvelabs.mock.json"),p().join(process.cwd(),"../../../api/data/twelvelabs.mock.json"),p().join(process.cwd(),"apps/api/data/twelvelabs.mock.json"),"/var/task/apps/api/data/twelvelabs.mock.json","/var/task/app/api/data/twelvelabs.mock.json"];for(let t of e)if(c().existsSync(t))return console.log(`[Direct Clips API] Loading mock data from: ${t}`),JSON.parse(c().readFileSync(t,"utf8"));console.warn("[Direct Clips API] Mock data file not found in filesystem paths, using embedded dataset")}catch(e){console.warn("[Direct Clips API] Could not load mock data from FS:",e)}return g.j}();console.log(`[Clips API] Using mock data: ${Object.keys(e.players||{}).length} players`);let t=[],n=s?`cfb_${s.toLowerCase().replace(/\s+/g,"_")}`:"";console.log(`[Clips API] Derived playerId: "${n}"`);let o=n&&a?`${n}:${a.toLowerCase()}`:"",l=g.j.propClipMap?.[o];if(console.log(`[Direct Clips API] PropKey: "${o}", MappedIds:`,l),l&&l.length&&e.players?.[n]){let s=e.players[n].videos||[];for(let a of l){let i=s.find(e=>e.id===a);i&&(console.log(`[Direct Clips API] Found deterministic match: ${a}`),t.push(m(i,e.players[n].team)))}}if(n&&e.players&&e.players[n]&&0===t.length){let s=e.players[n].videos||[];for(let i of s){if(a){let e=a.toLowerCase(),t=i.tags?.some(t=>t.includes(e)||e.includes(t)||e.includes("passing")&&t.includes("pass")||e.includes("rushing")&&t.includes("rush")||e.includes("receiving")&&t.includes("receiv"));if(!t)continue}t.push(m(i,e.players[n].team))}}if(0===t.length&&a&&!e.players?.[n]){console.log(`[Direct Clips API] Player not in dataset, doing generic search for stat: ${a}`);e:for(let[s,n]of Object.entries(e.players||{}))for(let e of n.videos||[]){let s=a.toLowerCase(),o=e.tags?.some(e=>e.includes(s)||s.includes(e));if(o&&(t.push(m(e,n.team)),t.length>=i))break e}}else 0===t.length&&e.players?.[n]&&console.log(`[Direct Clips API] Player ${n} exists but no clips found for stat: ${a}`);t.sort((e,t)=>(t.relevanceScore||0)-(e.relevanceScore||0));let d=t.slice(0,i);return console.log(`[Direct Clips API] Returning ${d.length} clips`),r.Z.json({clips:d,total:d.length,cached:!1,providers:["twelvelabs"],indexStatus:"ready",poweredBy:"TwelveLabs Video Intelligence (Embedded Mock)"})}catch(e){return console.error("[Direct Clips API] Error:",e),r.Z.json({clips:[],error:"Failed to fetch clips",total:0},{status:500})}}function m(e,t){return{id:`twelvelabs_${e.id}`,platform:"twelvelabs",externalId:e.id,title:e.title,description:e.clips?.[0]?.description||e.title,url:e.url,thumbnailUrl:e.thumbnail,author:`${t} Highlights`,duration:e.duration,publishedAt:e.metadata?.date||new Date().toISOString(),viewCount:Math.floor(1e5*Math.random())+1e4,relevanceScore:e.confidence,tags:e.tags||["highlights"],gameContext:{opponent:e.metadata?.opponent,date:e.metadata?.date,week:e.metadata?.week,season:2025},startTime:e.clips?.[0]?.start_time||0,endTime:e.clips?.[0]?.end_time||e.duration}}let f=new i.AppRouteRouteModule({definition:{kind:n.x.APP_ROUTE,page:"/api/clips/route",pathname:"/api/clips",filename:"route",bundlePath:"app/api/clips/route"},resolvedPagePath:"C:\\Users\\akash\\Documents\\propsage\\apps\\web\\src\\app\\api\\clips\\route.ts",nextConfigOutput:"",userland:a}),{requestAsyncStorage:y,staticGenerationAsyncStorage:b,serverHooks:k,headerHooks:w,staticGenerationBailout:v}=f,C="/api/clips/route";function j(){return(0,o.patchFetch)({serverHooks:k,staticGenerationAsyncStorage:b})}},72512:(e,t,s)=>{s.d(t,{j:()=>a});let a={players:{cfb_gunner_stockton:{name:"Gunner Stockton",team:"UGA",videos:[{id:"vid_stockton_pass_highlights_001",title:"Gunner Stockton passes to Colbie Young touchdown",url:"/clips/9-27%20uga%20alabama%20Gunner%20Stockton%20passes%20to%20Colbie%20Young%20touchdown.mp4",thumbnail:"/clips/thumbnails/9-27%20uga%20alabama%20Gunner%20Stockton%20passes%20to%20Colbie%20Young%20touchdown.jpg",duration:30,confidence:.94,tags:["passing","touchdown","deep_ball","clutch","passing_yds","pass_tds","longest_completion"],metadata:{game:"UGA vs Alabama",date:"2025-09-27",quarter:3,down_distance:"2nd & 8",field_position:"UGA 35"},clips:[{start_time:0,end_time:30,description:"Stockton perfect strike to Young for TD (explosive pass)"}]}]},cfb_haynes_king:{name:"Haynes King",team:"Georgia Tech",videos:[{id:"vid_king_passing_touchdown_001",title:"Haynes King passing touchdown from 3rd and 10",url:"/clips/9-27%20georgia%20tech%20wake%20forest%20haynes%20king%20passing%20touchdown%20from%203rd%20and%2010%20to%20begin%20comeback.mp4",thumbnail:"/clips/thumbnails/9-27%20georgia%20tech%20wake%20forest%20haynes%20king%20passing%20touchdown%20from%203rd%20and%2010%20to%20begin%20comeback.jpg",duration:35,confidence:.92,tags:["passing","touchdown","comeback","clutch","passing_yds","pass_tds"],metadata:{game:"Georgia Tech vs Wake Forest",date:"2025-09-27",quarter:3,down_distance:"3rd & 10",field_position:"WF 25"},clips:[{start_time:0,end_time:35,description:"Critical 3rd and 10 TD pass to begin comeback"}]},{id:"vid_king_rushing_touchdown_001",title:"Haynes King designed QB rushing TD",url:"/clips/9-27%20georgia%20tech%20wake%20forest%20haynes%20king%20running%20touchdown%20bringing%20game%20to%2017-20.mp4",thumbnail:"/clips/thumbnails/9-27%20georgia%20tech%20wake%20forest%20haynes%20king%20running%20touchdown%20bringing%20game%20to%2017-20.jpg",duration:28,confidence:.9,tags:["rushing","rush_tds","rushing_yds","designed_run","mobility","touchdown"],metadata:{game:"Georgia Tech vs Wake Forest",date:"2025-09-27",quarter:2,down_distance:"2nd & Goal",field_position:"WF 5"},clips:[{start_time:0,end_time:28,description:"Designed QB power for rushing touchdown"}]}]},cfb_jamal_haynes:{name:"Jamal Haynes",team:"Georgia Tech",videos:[{id:"vid_jamal_haynes_run_001",title:"Jamal Haynes interior run (ball security highlight)",url:"/clips/9-27%20georgia%20tech%20wake%20forest%20jamal%20haines%20fumble.mp4",thumbnail:"/clips/thumbnails/9-27%20georgia%20tech%20wake%20forest%20jamal%20haines%20fumble.jpg",duration:22,confidence:.78,tags:["rushing","rushing_yds","run_play","ground_game"],metadata:{game:"Georgia Tech vs Wake Forest",date:"2025-09-27",quarter:1,field_position:"GT 40"},clips:[{start_time:0,end_time:22,description:"Haynes interior zone â€“ illustrates rushing style & risk"}]}]},cfb_luke_altmyer:{name:"Luke Altmyer",team:"Illinois",videos:[{id:"vid_altmyer_pass_tds_001",title:"Luke Altmyer 3 TD passes vs USC highlights",url:"/clips/sample-illinois-usc-altmyer-passing.mp4",thumbnail:"/clips/thumbnails/sample-illinois-usc-altmyer-passing.jpg",duration:45,confidence:.91,tags:["passing","pass_tds","touchdown","red_zone","passing_yds"],metadata:{game:"Illinois vs USC",date:"2025-09-21",quarter:"Multiple",field_position:"Various"},clips:[{start_time:0,end_time:45,description:"Altmyer 3 TD compilation - red zone efficiency"}]}]}},propClipMap:{"cfb_gunner_stockton:passing_yds":["vid_stockton_pass_highlights_001"],"cfb_gunner_stockton:pass_tds":["vid_stockton_pass_highlights_001"],"cfb_gunner_stockton:longest_completion":["vid_stockton_pass_highlights_001"],"cfb_haynes_king:passing_yds":["vid_king_passing_touchdown_001"],"cfb_haynes_king:pass_tds":["vid_king_passing_touchdown_001"],"cfb_haynes_king:rush_tds":["vid_king_rushing_touchdown_001"],"cfb_haynes_king:rushing_yds":["vid_king_rushing_touchdown_001"],"cfb_jamal_haynes:rushing_yds":["vid_jamal_haynes_run_001"],"cfb_luke_altmyer:passing_yds":["vid_altmyer_pass_tds_001"],"cfb_luke_altmyer:pass_tds":["vid_altmyer_pass_tds_001"]}}}};var t=require("../../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),a=t.X(0,[102,375],()=>s(38593));module.exports=a})();