"use strict";(()=>{var e={};e.id=730,e.ids=[730],e.modules={30517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},6966:(e,t,a)=>{a.r(t),a.d(t,{headerHooks:()=>g,originalPathname:()=>A,patchFetch:()=>P,requestAsyncStorage:()=>y,routeModule:()=>x,serverHooks:()=>T,staticGenerationAsyncStorage:()=>v,staticGenerationBailout:()=>E});var r={};a.r(r),a.d(r,{POST:()=>h,dynamic:()=>w});var i=a(67097),o=a(91923),n=a(33077),s=a(2739),l=a(18891);let u=process.env.TL_BASE_URL||"https://api.twelvelabs.io",d=process.env.TWELVE_LABS_API_KEY;d||console.warn("[TL] TWELVE_LABS_API_KEY not set â€“ index route will fail.");let c=l.Ry({indexName:l.Z_().default("college-football-12"),clips:l.IX(l.Ry({url:l.Z_().url(),game:l.Z_(),teams:l.bc([l.Z_(),l.Z_()]),meta:l.Ry({quarter:l.Z_().optional(),clock:l.Z_().optional(),downDistance:l.Z_().optional()}).optional()}))});async function p(e,t={}){let a=await fetch(`${u}${e}`,{...t,headers:{"Content-Type":"application/json","x-api-key":d||"",...t.headers||{}},cache:"no-store"});if(!a.ok){let t=await a.text();throw Error(`TL_ERR_${a.status}_${e}: ${t.slice(0,200)}`)}return a.json()}async function m(e){let t=await p("/v3/indexes?limit=100"),a=t?.data?.find(t=>t.name===e);if(a)return a.id;let r=await p("/v3/indexes",{method:"POST",body:JSON.stringify({name:e})});return r.id}async function _(e,t,a){let r=await p("/v3/tasks",{method:"POST",body:JSON.stringify({type:"index",index_id:e,video_url:t,metadata:a})});return r.id}async function f(e,t=3e5){let a=Date.now();for(;Date.now()-a<t;){let t=await p(`/v3/tasks/${e}`);if("completed"===t.status)return t.result;if("failed"===t.status)throw Error(`TL_TASK_FAILED: ${t.error}`);await new Promise(e=>setTimeout(e,3e3))}throw Error("TL_TASK_TIMEOUT")}let w="force-dynamic";async function h(e){try{let t=c.parse(await e.json()),a=await m(t.indexName),r=[];for(let e of t.clips){let t=await _(a,e.url,{game:e.game,teams:e.teams,...e.meta}),i=await f(t);r.push({indexId:a,videoId:i.video_id,...e})}return s.Z.json({indexId:a,results:r})}catch(e){return s.Z.json({error:e.message},{status:400})}}let x=new i.AppRouteRouteModule({definition:{kind:o.x.APP_ROUTE,page:"/api/tl/index/route",pathname:"/api/tl/index",filename:"route",bundlePath:"app/api/tl/index/route"},resolvedPagePath:"C:\\Users\\akash\\Documents\\propsage\\apps\\web\\src\\app\\api\\tl\\index\\route.ts",nextConfigOutput:"",userland:r}),{requestAsyncStorage:y,staticGenerationAsyncStorage:v,serverHooks:T,headerHooks:g,staticGenerationBailout:E}=x,A="/api/tl/index/route";function P(){return(0,n.patchFetch)({serverHooks:T,staticGenerationAsyncStorage:v})}}};var t=require("../../../../webpack-runtime.js");t.C(e);var a=e=>t(t.s=e),r=t.X(0,[102,375,891],()=>a(6966));module.exports=r})();