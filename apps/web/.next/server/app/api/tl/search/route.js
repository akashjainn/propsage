"use strict";(()=>{var e={};e.id=496,e.ids=[496],e.modules={30517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},30050:(e,t,a)=>{a.r(t),a.d(t,{headerHooks:()=>f,originalPathname:()=>g,patchFetch:()=>x,requestAsyncStorage:()=>v,routeModule:()=>m,serverHooks:()=>E,staticGenerationAsyncStorage:()=>y,staticGenerationBailout:()=>A});var r={};a.r(r),a.d(r,{POST:()=>_,dynamic:()=>h});var s=a(67097),o=a(91923),i=a(33077),n=a(2739),l=a(18891);let p=process.env.TWELVELABS_BASE_URL||"https://api.twelvelabs.io/v1.2",u=process.env.TWELVELABS_API_KEY||process.env.TL_API_KEY||process.env.TWELVE_LABS_API_KEY;async function c(e,t={}){let a=await fetch(`${p}${e}`,{...t,headers:{"Content-Type":"application/json","x-api-key":u||"",...t.headers||{}},cache:"no-store"});if(!a.ok){let t=await a.text();throw Error(`TL_ERR_${a.status}_${e}: ${t.slice(0,200)}`)}return a.json()}let d=l.Ry({indexId:l.Z_(),query:l.Z_().min(2),filters:l.Ry({game:l.Z_().optional(),team:l.Z_().optional()}).optional(),topK:l.Rx().min(1).max(20).default(6)}),h="force-dynamic";async function _(e){try{let{indexId:t,query:a,filters:r,topK:s}=d.parse(await e.json());if(!u)return n.Z.json({error:"Missing Twelve Labs API key (set TWELVE_LABS_API_KEY)"},{status:400});let o=await c("/search",{method:"POST",body:JSON.stringify({index_id:t,query:a,search_options:["visual","conversation","text_in_video"],sort_option:"score",page_limit:s,...r&&Object.keys(r).length>0?{filter:r}:{}})}),i=(o?.data||[]).map(e=>({videoId:e.video_id,start:e.start??0,end:e.end??(e.start??0)+12,score:e.score,thumbnailUrl:e.thumbnail_url,title:e.metadata?.filename||`Clip ${e.start}s-${e.end}s`,url:e.hls?.video_url||e.mp4?.video_url||"",type:e.hls?.video_url?"hls":"mp4"}));return n.Z.json({results:i})}catch(e){return n.Z.json({error:e.message},{status:400})}}let m=new s.AppRouteRouteModule({definition:{kind:o.x.APP_ROUTE,page:"/api/tl/search/route",pathname:"/api/tl/search",filename:"route",bundlePath:"app/api/tl/search/route"},resolvedPagePath:"C:\\Users\\akash\\Documents\\propsage\\apps\\web\\src\\app\\api\\tl\\search\\route.ts",nextConfigOutput:"",userland:r}),{requestAsyncStorage:v,staticGenerationAsyncStorage:y,serverHooks:E,headerHooks:f,staticGenerationBailout:A}=m,g="/api/tl/search/route";function x(){return(0,i.patchFetch)({serverHooks:E,staticGenerationAsyncStorage:y})}}};var t=require("../../../../webpack-runtime.js");t.C(e);var a=e=>t(t.s=e),r=t.X(0,[102,375,891],()=>a(30050));module.exports=r})();