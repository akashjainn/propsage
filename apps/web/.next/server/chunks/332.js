"use strict";exports.id=332,exports.ids=[332],exports.modules={34332:(e,t,s)=>{s.r(t),s.d(t,{default:()=>w});var a=s(55830),i=s(40931),l=s(19798),r=s(31969),n=s(65272),d=s(34536),c=s.n(d);let o=c()(async()=>{},{loadableGenerated:{modules:["C:\\Users\\akash\\Documents\\propsage\\apps\\web\\src\\components\\LazyVideo.tsx -> ./VideoPlayer"]},ssr:!1}),m=function({src:e,type:t="mp4",poster:s,startTime:l=0,autoPlay:r=!1,muted:n,className:d="",eager:c=!1,title:m}){let{ref:u,inView:h}=function(e={}){let{root:t=null,rootMargin:s="0px",threshold:a=.1,freezeOnceVisible:l=!0}=e,r=(0,i.useRef)(null),[n,d]=(0,i.useState)(null),c=!!n?.isIntersecting&&l;return(0,i.useEffect)(()=>{let e=r.current;if(!e||c)return;let i=new IntersectionObserver(([e])=>{d(e)},{root:t,rootMargin:s,threshold:a});return i.observe(e),()=>i.disconnect()},[t,s,a,c]),{ref:r,entry:n,inView:!!n?.isIntersecting}}({rootMargin:"200px",threshold:.1,freezeOnceVisible:!0}),x=c||h,[p,g]=(0,i.useState)(!1);return(0,i.useEffect)(()=>{if(x){let e=setTimeout(()=>g(!0),40);return()=>clearTimeout(e)}},[x]),(0,a.jsxs)("div",{ref:u,className:`relative w-full ${d}`,children:[!p&&(0,a.jsxs)("div",{className:"aspect-video w-full rounded-xl overflow-hidden relative",children:[s?a.jsx("img",{src:s,alt:m||"Video thumbnail",className:"w-full h-full object-cover blur-sm scale-105 brightness-90",loading:"lazy"}):a.jsx("div",{className:"w-full h-full bg-gradient-to-br from-white/10 to-white/5"}),a.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:a.jsx("div",{className:"px-3 py-1.5 rounded-full bg-black/60 border border-white/20 text-[11px] tracking-wide text-white/70 font-medium",children:"Loading…"})})]}),p&&a.jsx(o,{source:{type:t,src:e},poster:s,startTime:l,autoPlay:r,muted:n,onReady:()=>{}})]})};var u=s(33701);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let h=(0,u.Z)("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]),x=(0,u.Z)("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]),p=function(e=768){let[t,s]=(0,i.useState)(()=>!1);return(0,i.useEffect)(()=>{function t(){s(window.innerWidth<e)}return window.addEventListener("resize",t),()=>window.removeEventListener("resize",t)},[e]),t},g=function({clips:e,eagerFirst:t=!0,className:s="",onSelectClip:l}){let r=(0,i.useRef)(null),[n,d]=(0,i.useState)(0),c=p(),o=(0,i.useCallback)(e=>{let t=r.current;if(!t)return;let s=t.children[e];s&&s.scrollIntoView({behavior:"smooth",inline:"center",block:"nearest"})},[]),u=()=>d(t=>Math.min(e.length-1,t+1)),g=()=>d(e=>Math.max(0,e-1));return(0,i.useEffect)(()=>{o(n)},[n,o]),(0,i.useEffect)(()=>{let e=e=>{"ArrowRight"===e.key&&u(),"ArrowLeft"===e.key&&g()};return window.addEventListener("keydown",e),()=>window.removeEventListener("keydown",e)},[]),(0,a.jsxs)("div",{className:`relative ${s}`,children:[a.jsx("div",{ref:r,className:"flex gap-4 overflow-x-auto scroll-smooth snap-x snap-mandatory pb-2 -mx-4 px-4",style:{scrollbarWidth:"none"},children:e.map((s,i)=>a.jsx("div",{className:"snap-center shrink-0 w-[calc(100vw-2rem)] sm:w-[360px] max-w-[420px]","aria-label":s.title||`Clip ${i+1}`,children:(0,a.jsxs)("div",{className:`rounded-2xl border border-white/10 glass-subtle overflow-hidden relative group ${i===n?"ring-2 ring-indigo-400/70":""}`,onClick:()=>l?.(s),children:[a.jsx(m,{src:s.url,type:s.type||(s.url.endsWith(".m3u8")?"hls":"mp4"),startTime:s.start,poster:s.thumbnailUrl,eager:t&&0===i,title:s.title,className:""}),(0,a.jsxs)("div",{className:"p-3 space-y-2",children:[(0,a.jsxs)("div",{className:"text-xs uppercase tracking-wide text-white/40 flex items-center justify-between",children:[a.jsx("span",{children:null!=s.relevance?`Score ${(100*s.relevance).toFixed(0)}%`:"Clip"}),(0,a.jsxs)("span",{className:"font-mono text-[10px] text-white/30",children:[i+1,"/",e.length]})]}),s.title&&a.jsx("div",{className:"text-sm font-medium text-white/90 line-clamp-2",children:s.title}),s.description&&a.jsx("div",{className:"text-[11px] text-white/60 line-clamp-2",children:s.description})]})]})},s.id||s.url+i))}),!c&&e.length>1&&(0,a.jsxs)(a.Fragment,{children:[a.jsx("button",{onClick:g,disabled:0===n,"aria-label":"Previous clip",className:"hidden md:flex absolute -left-4 top-1/2 -translate-y-1/2 h-10 w-10 rounded-full bg-black/40 hover:bg-black/60 border border-white/10 backdrop-blur flex items-center justify-center text-white/70 disabled:opacity-30 disabled:pointer-events-none",children:a.jsx(h,{className:"w-5 h-5"})}),a.jsx("button",{onClick:u,disabled:n===e.length-1,"aria-label":"Next clip",className:"hidden md:flex absolute -right-4 top-1/2 -translate-y-1/2 h-10 w-10 rounded-full bg-black/40 hover:bg-black/60 border border-white/10 backdrop-blur flex items-center justify-center text-white/70 disabled:opacity-30 disabled:pointer-events-none",children:a.jsx(x,{className:"w-5 h-5"})})]}),e.length>1&&a.jsx("div",{className:"flex items-center justify-center gap-2 mt-2",children:e.map((e,t)=>a.jsx("button",{onClick:()=>d(t),"aria-label":`Go to clip ${t+1}`,className:`h-2.5 w-2.5 rounded-full transition-all ${t===n?"bg-indigo-400 w-6":"bg-white/25 hover:bg-white/40"}`},t))})]})};var f=s(28203);function v({game:e,edge:t}){let[s,l]=(0,i.useState)([]),[r,n]=(0,i.useState)(!0);return((0,i.useEffect)(()=>{let s=!0;return(async()=>{n(!0);try{let a=new URLSearchParams({game:e,player:t.player,market:t.market}),i=await fetch(`/api/tl/clips?${a.toString()}`,{cache:"no-store"}).then(e=>e.json());if(!s)return;l(i?.results??[])}catch(e){}finally{s&&n(!1)}})(),()=>{s=!1}},[e,t.player,t.market]),r)?a.jsx("div",{className:"h-40 rounded-xl bg-muted/20 animate-pulse"}):s.length?a.jsx("div",{className:"space-y-4",children:s.map(e=>(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("div",{className:"text-sm opacity-80",children:[Math.round(e.start),"s–",Math.round(e.end),"s"]}),a.jsx("video",{src:e.url,controls:!0,preload:"metadata",className:"w-full rounded-xl bg-black aspect-video",onLoadedMetadata:t=>{e.start&&(t.currentTarget.currentTime=e.start)}})]},`${e.url}-${e.start}`))}):a.jsx("div",{className:"text-sm text-muted-foreground",children:"No demo clips available."})}var b=s(69041),y=s(50024),j=s(29759);function w({edge:e,gameTitle:t,open:s,onClose:d}){let c=(0,i.useMemo)(()=>e?`${e.player} ${e.market} ${t??""}`.trim():"",[e,t]),o=n.h6.tl&&!!n.QY,{loading:u,results:h,error:x}=function({indexId:e,query:t,filters:s,debounceMs:a=300}){let[l,r]=(0,i.useState)(()=>({loading:!1,results:[],error:null}));return(0,i.useEffect)(()=>{if(!t?.trim()){r(e=>({...e,results:[]}));return}let i=setTimeout(async()=>{r({loading:!0,results:[],error:null});try{let a=await fetch("/api/tl/search",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({indexId:e,query:t,filters:s})}).then(e=>e.json());r({loading:!1,results:a.results||[],error:null})}catch(e){r({loading:!1,results:[],error:e})}},a);return()=>clearTimeout(i)},[e,t,JSON.stringify(s),a]),l}(o&&s&&c?{indexId:n.QY,query:c,filters:{game:t??void 0}}:{indexId:"",query:""});(0,i.useEffect)(()=>{s&&n.h6.tl&&!n.QY&&((0,f.pushToast)("TL feature on but TWELVELABS_INDEX_ID missing. Using demo clips."),j.addBreadcrumb({category:"config",level:"warning",message:"tl_missing_index_id"}))},[s]),(0,i.useEffect)(()=>{x&&((0,f.pushToast)("Clip search failed. Please try again."),j.captureMessage("TL search failed",{level:"warning",extra:{edge:e,gameTitle:t,query:c}}))},[x,e,t,c]);let[w,N]=(0,i.useState)(null),k=p();return(0,i.useEffect)(()=>{let s=!0;if(e&&t)return(async()=>{try{let a=new URLSearchParams({game:t,player:e.player,market:e.market}),i=await fetch(`/api/tl/clips?${a.toString()}`,{cache:"no-store"}).then(e=>e.json());if(!s)return;N(i?.results??null)}catch{}})(),()=>{s=!1}},[e?.player,e?.market,t]),a.jsx(l.M,{children:s&&e&&a.jsx(b.dy,{isOpen:s,onClose:d,title:e.player,className:"sm:w-[540px]",children:(0,a.jsxs)(r.E.div,{"data-testid":"evidence-drawer",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:y.Vv,className:"space-y-6",children:[(0,a.jsxs)("div",{className:"space-y-2 -mt-2",children:[a.jsx("div",{className:"text-sm text-white/50 font-medium",children:e.market}),t&&(0,a.jsxs)("div",{className:"text-sm text-white/50 flex items-center gap-2",children:[a.jsx("span",{className:"w-1 h-1 rounded-full bg-white/30"}),a.jsx("span",{children:t})]})]}),(0,a.jsxs)(r.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{...y.Vv,delay:.2},className:"space-y-4",children:[(0,a.jsxs)("h3",{className:"text-xl font-bold text-white flex items-center gap-2",children:[a.jsx("span",{className:"w-1 h-6 bg-gradient-primary rounded-full"}),"Video Evidence"]}),u&&a.jsx(r.E.div,{variants:(0,y.j_)(.1),initial:"initial",animate:"animate",className:"space-y-4",children:Array.from({length:2}).map((e,t)=>a.jsx(r.E.div,{variants:y.CU,children:a.jsx(b.Od,{className:"h-48 aspect-video"})},t))}),x&&a.jsx(r.E.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},className:"text-sm text-red-400 p-4 rounded-xl glass border border-red-400/20 text-center",children:"Search failed. Try again."}),h?.length>0&&(k?a.jsx(g,{clips:h.slice(0,6).map((e,t)=>({id:`${e.videoId??e.url}-${e.start}`,url:e.url,start:e.start,end:e.end,title:e.title,description:e.description,thumbnailUrl:e.thumbnailUrl,relevance:"number"==typeof e.score?e.score:void 0,type:e.url.endsWith(".m3u8")?"hls":"mp4"})),eagerFirst:!0,className:"mt-1"}):a.jsx(r.E.div,{variants:(0,y.j_)(.12),initial:"initial",animate:"animate",className:"space-y-6",children:h.slice(0,3).map((e,t)=>(0,a.jsxs)(r.E.div,{variants:y.CU,className:"glass rounded-2xl p-4 space-y-3",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between text-sm",children:[(0,a.jsxs)("span",{className:"text-white/70 font-medium",children:["Match Score: ",a.jsx("span",{className:"text-primary-400 font-bold",children:e.score?.toFixed?.(2)??"—"})]}),(0,a.jsxs)("span",{className:"text-white/50 font-medium",children:[Math.round(e.start),"s–",Math.round(e.end),"s"]})]}),a.jsx(m,{src:e.url,type:e.url.endsWith(".m3u8")?"hls":"mp4",startTime:e.start,eager:0===t,poster:e.thumbnailUrl,title:e.title,className:"shadow-lg"})]},`${e.videoId??e.url}-${e.start}`))})),!u&&e&&(!o||(h?.length??0)===0)&&a.jsx(r.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{...y.Vv,delay:.3},children:w?k?a.jsx(g,{clips:w.slice(0,6).map((e,t)=>({id:`${e.url}-${e.start}`,url:e.url,start:e.start,end:e.end,title:e.title,description:e.description,thumbnailUrl:e.thumbnailUrl,relevance:"number"==typeof e.score?e.score:void 0,type:e.url.endsWith(".m3u8")?"hls":"mp4"})),eagerFirst:!0,className:"mt-1"}):a.jsx(r.E.div,{variants:(0,y.j_)(.1),initial:"initial",animate:"animate",className:"space-y-4",children:w.map((e,t)=>(0,a.jsxs)(r.E.div,{variants:y.CU,className:"glass rounded-2xl p-4 space-y-3",children:[(0,a.jsxs)("div",{className:"text-sm text-white/50 font-medium",children:[Math.round(e.start),"s–",Math.round(e.end),"s"]}),a.jsx(m,{src:e.url,type:e.url.endsWith(".m3u8")?"hls":"mp4",startTime:e.start,eager:0===t,poster:e.thumbnailUrl,title:e.title,className:"shadow-lg"})]},`${e.url}-${e.start}`))}):a.jsx(v,{game:t??"",edge:e})})]}),(0,a.jsxs)(r.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{...y.Vv,delay:.4},className:"space-y-6 pt-6 border-t border-white/10",children:[(0,a.jsxs)(r.E.div,{variants:(0,y.j_)(.08),initial:"initial",animate:"animate",className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)(r.E.div,{variants:y.CU,className:"p-4 rounded-2xl glass-subtle text-center group",whileHover:{backgroundColor:"rgba(255, 255, 255, 0.08)",scale:1.02},transition:{duration:.2},children:[a.jsx("div",{className:"text-xs text-white/40 font-medium mb-2",children:"Market Line"}),a.jsx("div",{className:"text-2xl font-bold text-white tabular-nums",children:e.marketLine??"—"})]}),(0,a.jsxs)(r.E.div,{variants:y.CU,className:"p-4 rounded-2xl glass-subtle text-center group",whileHover:{backgroundColor:"rgba(255, 255, 255, 0.08)",scale:1.02},transition:{duration:.2},children:[a.jsx("div",{className:"text-xs text-white/40 font-medium mb-2",children:"Fair Line"}),a.jsx("div",{className:"text-2xl font-bold text-white tabular-nums",children:e.fairLine??"—"})]}),(0,a.jsxs)(r.E.div,{variants:y.CU,className:`p-4 rounded-2xl glass-subtle text-center group border ${(e.edgePct??0)>=0?"border-green-400/20 bg-green-400/5":"border-red-400/20 bg-red-400/5"}`,whileHover:{scale:1.02,backgroundColor:(e.edgePct??0)>=0?"rgba(34, 197, 94, 0.1)":"rgba(239, 68, 68, 0.1)"},transition:{duration:.2},children:[a.jsx("div",{className:"text-xs text-white/40 font-medium mb-2",children:"Edge %"}),a.jsx("div",{className:`text-2xl font-bold tabular-nums ${(e.edgePct??0)>=0?"text-green-400":"text-red-400"}`,children:e.edgePct?`${e.edgePct>0?"+":""}${e.edgePct.toFixed(1)}%`:"—"})]}),(0,a.jsxs)(r.E.div,{variants:y.CU,className:"p-4 rounded-2xl glass-subtle text-center group",whileHover:{backgroundColor:"rgba(255, 255, 255, 0.08)",scale:1.02},transition:{duration:.2},children:[a.jsx("div",{className:"text-xs text-white/40 font-medium mb-2",children:"Confidence"}),a.jsx("div",{className:"text-2xl font-bold text-white tabular-nums",children:null!=e.confidence?`${Math.round(100*e.confidence)}%`:"—"})]})]}),e.bullets&&e.bullets.length>0&&(0,a.jsxs)(r.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{...y.Vv,delay:.5},className:"space-y-4 glass rounded-2xl p-6",children:[(0,a.jsxs)("h4",{className:"text-lg font-bold text-white flex items-center gap-2",children:[a.jsx("span",{className:"w-1 h-5 bg-gradient-primary rounded-full"}),"Why this edge exists"]}),a.jsx(r.E.div,{variants:(0,y.j_)(.1),initial:"initial",animate:"animate",className:"space-y-3",children:e.bullets.map((e,t)=>(0,a.jsxs)(r.E.div,{variants:y.CU,className:"flex items-start gap-3 text-white/80",children:[a.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-primary-400 mt-2 flex-shrink-0"}),a.jsx("span",{className:"leading-relaxed",children:e})]},t))})]}),e.analysis&&(0,a.jsxs)(r.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{...y.Vv,delay:.6},className:"space-y-4 glass rounded-2xl p-6",children:[(0,a.jsxs)("h4",{className:"text-lg font-bold text-white flex items-center gap-2",children:[a.jsx("span",{className:"w-1 h-5 bg-gradient-primary rounded-full"}),"Analysis"]}),a.jsx("p",{className:"text-white/80 leading-relaxed",children:e.analysis})]})]})]})})})}}};