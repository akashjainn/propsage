"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[903],{1903:function(e,t,a){a.r(t),a.d(t,{default:function(){return N}});var s=a(5974),i=a(3865),l=a(7578),n=a(5773),r=a(6169),c=a(7153),d=a.n(c);let o=d()(()=>a.e(958).then(a.bind(a,958)),{loadableGenerated:{webpack:()=>[958]},ssr:!1});var u=function(e){let{src:t,type:a="mp4",poster:l,startTime:n=0,autoPlay:r=!1,muted:c,className:d="",eager:u=!1,title:m}=e,{ref:h,inView:x}=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{root:t=null,rootMargin:a="0px",threshold:s=.1,freezeOnceVisible:l=!0}=e,n=(0,i.useRef)(null),[r,c]=(0,i.useState)(null),d=!!(null==r?void 0:r.isIntersecting)&&l;return(0,i.useEffect)(()=>{let e=n.current;if(!e||d)return;let i=new IntersectionObserver(e=>{let[t]=e;c(t)},{root:t,rootMargin:a,threshold:s});return i.observe(e),()=>i.disconnect()},[t,a,s,d]),{ref:n,entry:r,inView:!!(null==r?void 0:r.isIntersecting)}}({rootMargin:"200px",threshold:.1,freezeOnceVisible:!0}),p=u||x,[v,f]=(0,i.useState)(!1);return(0,i.useEffect)(()=>{if(p){let e=setTimeout(()=>f(!0),40);return()=>clearTimeout(e)}},[p]),(0,s.jsxs)("div",{ref:h,className:"relative w-full ".concat(d),children:[!v&&(0,s.jsxs)("div",{className:"aspect-video w-full rounded-xl overflow-hidden relative",children:[l?(0,s.jsx)("img",{src:l,alt:m||"Video thumbnail",className:"w-full h-full object-cover blur-sm scale-105 brightness-90",loading:"lazy"}):(0,s.jsx)("div",{className:"w-full h-full bg-gradient-to-br from-white/10 to-white/5"}),(0,s.jsx)("div",{className:"absolute inset-0 flex items-center justify-center",children:(0,s.jsx)("div",{className:"px-3 py-1.5 rounded-full bg-black/60 border border-white/20 text-[11px] tracking-wide text-white/70 font-medium",children:"Loading…"})})]}),v&&(0,s.jsx)(o,{source:{type:a,src:t},poster:l,startTime:n,autoPlay:r,muted:c,onReady:()=>{}})]})},m=a(5439);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let h=(0,m.Z)("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]),x=(0,m.Z)("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);var p=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:768,[t,a]=(0,i.useState)(()=>window.innerWidth<e);return(0,i.useEffect)(()=>{function t(){a(window.innerWidth<e)}return window.addEventListener("resize",t),()=>window.removeEventListener("resize",t)},[e]),t},v=function(e){let{clips:t,eagerFirst:a=!0,className:l="",onSelectClip:n}=e,r=(0,i.useRef)(null),[c,d]=(0,i.useState)(0),o=p(),m=(0,i.useCallback)(e=>{let t=r.current;if(!t)return;let a=t.children[e];a&&a.scrollIntoView({behavior:"smooth",inline:"center",block:"nearest"})},[]),v=()=>d(e=>Math.min(t.length-1,e+1)),f=()=>d(e=>Math.max(0,e-1));return(0,i.useEffect)(()=>{m(c)},[c,m]),(0,i.useEffect)(()=>{let e=e=>{"ArrowRight"===e.key&&v(),"ArrowLeft"===e.key&&f()};return window.addEventListener("keydown",e),()=>window.removeEventListener("keydown",e)},[]),(0,s.jsxs)("div",{className:"relative ".concat(l),children:[(0,s.jsx)("div",{ref:r,className:"flex gap-4 overflow-x-auto scroll-smooth snap-x snap-mandatory pb-2 -mx-4 px-4",style:{scrollbarWidth:"none"},children:t.map((e,i)=>(0,s.jsx)("div",{className:"snap-center shrink-0 w-[calc(100vw-2rem)] sm:w-[360px] max-w-[420px]","aria-label":e.title||"Clip ".concat(i+1),children:(0,s.jsxs)("div",{className:"rounded-2xl border border-white/10 glass-subtle overflow-hidden relative group ".concat(i===c?"ring-2 ring-indigo-400/70":""),onClick:()=>null==n?void 0:n(e),children:[(0,s.jsx)(u,{src:e.url,type:e.type||(e.url.endsWith(".m3u8")?"hls":"mp4"),startTime:e.start,poster:e.thumbnailUrl,eager:a&&0===i,title:e.title,className:""}),(0,s.jsxs)("div",{className:"p-3 space-y-2",children:[(0,s.jsxs)("div",{className:"text-xs uppercase tracking-wide text-white/40 flex items-center justify-between",children:[(0,s.jsx)("span",{children:null!=e.relevance?"Score ".concat((100*e.relevance).toFixed(0),"%"):"Clip"}),(0,s.jsxs)("span",{className:"font-mono text-[10px] text-white/30",children:[i+1,"/",t.length]})]}),e.title&&(0,s.jsx)("div",{className:"text-sm font-medium text-white/90 line-clamp-2",children:e.title}),e.description&&(0,s.jsx)("div",{className:"text-[11px] text-white/60 line-clamp-2",children:e.description})]})]})},e.id||e.url+i))}),!o&&t.length>1&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("button",{onClick:f,disabled:0===c,"aria-label":"Previous clip",className:"hidden md:flex absolute -left-4 top-1/2 -translate-y-1/2 h-10 w-10 rounded-full bg-black/40 hover:bg-black/60 border border-white/10 backdrop-blur flex items-center justify-center text-white/70 disabled:opacity-30 disabled:pointer-events-none",children:(0,s.jsx)(h,{className:"w-5 h-5"})}),(0,s.jsx)("button",{onClick:v,disabled:c===t.length-1,"aria-label":"Next clip",className:"hidden md:flex absolute -right-4 top-1/2 -translate-y-1/2 h-10 w-10 rounded-full bg-black/40 hover:bg-black/60 border border-white/10 backdrop-blur flex items-center justify-center text-white/70 disabled:opacity-30 disabled:pointer-events-none",children:(0,s.jsx)(x,{className:"w-5 h-5"})})]}),t.length>1&&(0,s.jsx)("div",{className:"flex items-center justify-center gap-2 mt-2",children:t.map((e,t)=>(0,s.jsx)("button",{onClick:()=>d(t),"aria-label":"Go to clip ".concat(t+1),className:"h-2.5 w-2.5 rounded-full transition-all ".concat(t===c?"bg-indigo-400 w-6":"bg-white/25 hover:bg-white/40")},t))})]})},f=a(6223);function g(e){let{game:t,edge:a}=e,[l,n]=(0,i.useState)([]),[r,c]=(0,i.useState)(!0);return((0,i.useEffect)(()=>{let e=!0;return(async()=>{c(!0);try{var s;let i=new URLSearchParams({game:t,player:a.player,market:a.market}),l=await fetch("/api/tl/clips?".concat(i.toString()),{cache:"no-store"}).then(e=>e.json());if(!e)return;n(null!==(s=null==l?void 0:l.results)&&void 0!==s?s:[])}catch(e){}finally{e&&c(!1)}})(),()=>{e=!1}},[t,a.player,a.market]),r)?(0,s.jsx)("div",{className:"h-40 rounded-xl bg-muted/20 animate-pulse"}):l.length?(0,s.jsx)("div",{className:"space-y-4",children:l.map(e=>(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsxs)("div",{className:"text-sm opacity-80",children:[Math.round(e.start),"s–",Math.round(e.end),"s"]}),(0,s.jsx)("video",{src:e.url,controls:!0,preload:"metadata",className:"w-full rounded-xl bg-black aspect-video",onLoadedMetadata:t=>{e.start&&(t.currentTarget.currentTime=e.start)}})]},"".concat(e.url,"-").concat(e.start)))}):(0,s.jsx)("div",{className:"text-sm text-muted-foreground",children:"No demo clips available."})}var b=a(3310),y=a(4022),j=a(9706),w=a(7610);function N(e){var t,a,c,d,o,m;let{edge:h,gameTitle:x,open:N,onClose:k}=e,E=(0,i.useMemo)(()=>h?"".concat(h.player," ").concat(h.market," ").concat(null!=x?x:"").trim():"",[h,x]),C=r.h6.tl&&!!r.QY,{loading:T,results:S,error:L}=function(e){let{indexId:t,query:a,filters:s,debounceMs:l=300}=e,[n,r]=(0,i.useState)(()=>({loading:!1,results:[],error:null}));return(0,i.useEffect)(()=>{if(!(null==a?void 0:a.trim())){r(e=>({...e,results:[]}));return}let e=setTimeout(async()=>{r({loading:!0,results:[],error:null});try{let e=await fetch("/api/tl/search",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({indexId:t,query:a,filters:s})}).then(e=>e.json());r({loading:!1,results:e.results||[],error:null})}catch(e){r({loading:!1,results:[],error:e})}},l);return()=>clearTimeout(e)},[t,a,JSON.stringify(s),l]),n}(C&&N&&E?{indexId:r.QY,query:E,filters:{game:null!=x?x:void 0}}:{indexId:"",query:""});(0,i.useEffect)(()=>{N&&r.h6.tl&&!r.QY&&((0,f.pushToast)("TL feature on but TWELVELABS_INDEX_ID missing. Using demo clips."),j.n({category:"config",level:"warning",message:"tl_missing_index_id"}))},[N]),(0,i.useEffect)(()=>{L&&((0,f.pushToast)("Clip search failed. Please try again."),w.uT("TL search failed",{level:"warning",extra:{edge:h,gameTitle:x,query:E}}))},[L,h,x,E]);let[U,M]=(0,i.useState)(null),_=p();return(0,i.useEffect)(()=>{let e=!0;if(h&&x)return(async()=>{try{var t;let a=new URLSearchParams({game:x,player:h.player,market:h.market}),s=await fetch("/api/tl/clips?".concat(a.toString()),{cache:"no-store"}).then(e=>e.json());if(!e)return;M(null!==(t=null==s?void 0:s.results)&&void 0!==t?t:null)}catch(e){}})(),()=>{e=!1}},[null==h?void 0:h.player,null==h?void 0:h.market,x]),(0,s.jsx)(l.M,{children:N&&h&&(0,s.jsx)(b.dy,{isOpen:N,onClose:k,title:h.player,className:"sm:w-[540px]",children:(0,s.jsxs)(n.E.div,{"data-testid":"evidence-drawer",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:y.Vv,className:"space-y-6",children:[(0,s.jsxs)("div",{className:"space-y-2 -mt-2",children:[(0,s.jsx)("div",{className:"text-sm text-white/50 font-medium",children:h.market}),x&&(0,s.jsxs)("div",{className:"text-sm text-white/50 flex items-center gap-2",children:[(0,s.jsx)("span",{className:"w-1 h-1 rounded-full bg-white/30"}),(0,s.jsx)("span",{children:x})]})]}),(0,s.jsxs)(n.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{...y.Vv,delay:.2},className:"space-y-4",children:[(0,s.jsxs)("h3",{className:"text-xl font-bold text-white flex items-center gap-2",children:[(0,s.jsx)("span",{className:"w-1 h-6 bg-gradient-primary rounded-full"}),"Video Evidence"]}),T&&(0,s.jsx)(n.E.div,{variants:(0,y.j_)(.1),initial:"initial",animate:"animate",className:"space-y-4",children:Array.from({length:2}).map((e,t)=>(0,s.jsx)(n.E.div,{variants:y.CU,children:(0,s.jsx)(b.Od,{className:"h-48 aspect-video"})},t))}),L&&(0,s.jsx)(n.E.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},className:"text-sm text-red-400 p-4 rounded-xl glass border border-red-400/20 text-center",children:"Search failed. Try again."}),(null==S?void 0:S.length)>0&&(_?(0,s.jsx)(v,{clips:S.slice(0,6).map((e,t)=>{var a;return{id:"".concat(null!==(a=e.videoId)&&void 0!==a?a:e.url,"-").concat(e.start),url:e.url,start:e.start,end:e.end,title:e.title,description:e.description,thumbnailUrl:e.thumbnailUrl,relevance:"number"==typeof e.score?e.score:void 0,type:e.url.endsWith(".m3u8")?"hls":"mp4"}}),eagerFirst:!0,className:"mt-1"}):(0,s.jsx)(n.E.div,{variants:(0,y.j_)(.12),initial:"initial",animate:"animate",className:"space-y-6",children:S.slice(0,3).map((e,t)=>{var a,i,l,r;return(0,s.jsxs)(n.E.div,{variants:y.CU,className:"glass rounded-2xl p-4 space-y-3",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between text-sm",children:[(0,s.jsxs)("span",{className:"text-white/70 font-medium",children:["Match Score: ",(0,s.jsx)("span",{className:"text-primary-400 font-bold",children:null!==(l=null===(i=e.score)||void 0===i?void 0:null===(a=i.toFixed)||void 0===a?void 0:a.call(i,2))&&void 0!==l?l:"—"})]}),(0,s.jsxs)("span",{className:"text-white/50 font-medium",children:[Math.round(e.start),"s–",Math.round(e.end),"s"]})]}),(0,s.jsx)(u,{src:e.url,type:e.url.endsWith(".m3u8")?"hls":"mp4",startTime:e.start,eager:0===t,poster:e.thumbnailUrl,title:e.title,className:"shadow-lg"})]},"".concat(null!==(r=e.videoId)&&void 0!==r?r:e.url,"-").concat(e.start))})})),!T&&h&&(!C||(null!==(t=null==S?void 0:S.length)&&void 0!==t?t:0)===0)&&(0,s.jsx)(n.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{...y.Vv,delay:.3},children:U?_?(0,s.jsx)(v,{clips:U.slice(0,6).map((e,t)=>({id:"".concat(e.url,"-").concat(e.start),url:e.url,start:e.start,end:e.end,title:e.title,description:e.description,thumbnailUrl:e.thumbnailUrl,relevance:"number"==typeof e.score?e.score:void 0,type:e.url.endsWith(".m3u8")?"hls":"mp4"})),eagerFirst:!0,className:"mt-1"}):(0,s.jsx)(n.E.div,{variants:(0,y.j_)(.1),initial:"initial",animate:"animate",className:"space-y-4",children:U.map((e,t)=>(0,s.jsxs)(n.E.div,{variants:y.CU,className:"glass rounded-2xl p-4 space-y-3",children:[(0,s.jsxs)("div",{className:"text-sm text-white/50 font-medium",children:[Math.round(e.start),"s–",Math.round(e.end),"s"]}),(0,s.jsx)(u,{src:e.url,type:e.url.endsWith(".m3u8")?"hls":"mp4",startTime:e.start,eager:0===t,poster:e.thumbnailUrl,title:e.title,className:"shadow-lg"})]},"".concat(e.url,"-").concat(e.start)))}):(0,s.jsx)(g,{game:null!=x?x:"",edge:h})})]}),(0,s.jsxs)(n.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{...y.Vv,delay:.4},className:"space-y-6 pt-6 border-t border-white/10",children:[(0,s.jsxs)(n.E.div,{variants:(0,y.j_)(.08),initial:"initial",animate:"animate",className:"grid grid-cols-2 gap-4",children:[(0,s.jsxs)(n.E.div,{variants:y.CU,className:"p-4 rounded-2xl glass-subtle text-center group",whileHover:{backgroundColor:"rgba(255, 255, 255, 0.08)",scale:1.02},transition:{duration:.2},children:[(0,s.jsx)("div",{className:"text-xs text-white/40 font-medium mb-2",children:"Market Line"}),(0,s.jsx)("div",{className:"text-2xl font-bold text-white tabular-nums",children:null!==(a=h.marketLine)&&void 0!==a?a:"—"})]}),(0,s.jsxs)(n.E.div,{variants:y.CU,className:"p-4 rounded-2xl glass-subtle text-center group",whileHover:{backgroundColor:"rgba(255, 255, 255, 0.08)",scale:1.02},transition:{duration:.2},children:[(0,s.jsx)("div",{className:"text-xs text-white/40 font-medium mb-2",children:"Fair Line"}),(0,s.jsx)("div",{className:"text-2xl font-bold text-white tabular-nums",children:null!==(c=h.fairLine)&&void 0!==c?c:"—"})]}),(0,s.jsxs)(n.E.div,{variants:y.CU,className:"p-4 rounded-2xl glass-subtle text-center group border ".concat((null!==(d=h.edgePct)&&void 0!==d?d:0)>=0?"border-green-400/20 bg-green-400/5":"border-red-400/20 bg-red-400/5"),whileHover:{scale:1.02,backgroundColor:(null!==(o=h.edgePct)&&void 0!==o?o:0)>=0?"rgba(34, 197, 94, 0.1)":"rgba(239, 68, 68, 0.1)"},transition:{duration:.2},children:[(0,s.jsx)("div",{className:"text-xs text-white/40 font-medium mb-2",children:"Edge %"}),(0,s.jsx)("div",{className:"text-2xl font-bold tabular-nums ".concat((null!==(m=h.edgePct)&&void 0!==m?m:0)>=0?"text-green-400":"text-red-400"),children:h.edgePct?"".concat(h.edgePct>0?"+":"").concat(h.edgePct.toFixed(1),"%"):"—"})]}),(0,s.jsxs)(n.E.div,{variants:y.CU,className:"p-4 rounded-2xl glass-subtle text-center group",whileHover:{backgroundColor:"rgba(255, 255, 255, 0.08)",scale:1.02},transition:{duration:.2},children:[(0,s.jsx)("div",{className:"text-xs text-white/40 font-medium mb-2",children:"Confidence"}),(0,s.jsx)("div",{className:"text-2xl font-bold text-white tabular-nums",children:null!=h.confidence?"".concat(Math.round(100*h.confidence),"%"):"—"})]})]}),h.bullets&&h.bullets.length>0&&(0,s.jsxs)(n.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{...y.Vv,delay:.5},className:"space-y-4 glass rounded-2xl p-6",children:[(0,s.jsxs)("h4",{className:"text-lg font-bold text-white flex items-center gap-2",children:[(0,s.jsx)("span",{className:"w-1 h-5 bg-gradient-primary rounded-full"}),"Why this edge exists"]}),(0,s.jsx)(n.E.div,{variants:(0,y.j_)(.1),initial:"initial",animate:"animate",className:"space-y-3",children:h.bullets.map((e,t)=>(0,s.jsxs)(n.E.div,{variants:y.CU,className:"flex items-start gap-3 text-white/80",children:[(0,s.jsx)("div",{className:"w-1.5 h-1.5 rounded-full bg-primary-400 mt-2 flex-shrink-0"}),(0,s.jsx)("span",{className:"leading-relaxed",children:e})]},t))})]}),h.analysis&&(0,s.jsxs)(n.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{...y.Vv,delay:.6},className:"space-y-4 glass rounded-2xl p-6",children:[(0,s.jsxs)("h4",{className:"text-lg font-bold text-white flex items-center gap-2",children:[(0,s.jsx)("span",{className:"w-1 h-5 bg-gradient-primary rounded-full"}),"Analysis"]}),(0,s.jsx)("p",{className:"text-white/80 leading-relaxed",children:h.analysis})]})]})]})})})}},6223:function(e,t,a){a.r(t),a.d(t,{default:function(){return r},pushToast:function(){return n}});var s=a(5974),i=a(3865);let l=null;function n(e){null==l||l(e)}function r(){let[e,t]=(0,i.useState)([]);return(0,i.useEffect)(()=>(l=e=>{let a=Date.now();t(t=>[...t,{id:a,text:e}]),setTimeout(()=>t(e=>e.filter(e=>e.id!==a)),3500)},()=>{l=null}),[]),(0,s.jsx)("div",{className:"fixed bottom-4 right-4 space-y-2 z-[1000]",children:e.map(e=>(0,s.jsx)("div",{className:"rounded-lg bg-black/80 text-white px-3 py-2 shadow",children:e.text},e.id))})}},7610:function(e,t,a){a.d(t,{uT:function(){return i}});var s=a(9487);function i(e,t){let a="string"==typeof t?t:void 0,i="string"!=typeof t?{captureContext:t}:void 0;return(0,s.nZ)().captureMessage(e,a,i)}}}]);