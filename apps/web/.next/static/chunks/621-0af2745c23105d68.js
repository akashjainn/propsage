"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[621],{25:function(e,t,a){a.d(t,{Z:function(){return i}});var s=a(5439);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let i=(0,s.Z)("TrendingDown",[["polyline",{points:"22 17 13.5 8.5 8.5 13.5 2 7",key:"1r2t7k"}],["polyline",{points:"16 17 22 17 22 11",key:"11uiuu"}]])},1621:function(e,t,a){a.r(t),a.d(t,{default:function(){return y}});var s=a(5974),i=a(3865),l=a(5773),r=a(5439);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let n=(0,r.Z)("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);var o=a(5645);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let c=(0,r.Z)("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]);var d=a(25);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let p=(0,r.Z)("Play",[["polygon",{points:"5 3 19 12 5 21 5 3",key:"191637"}]]);var m=a(1903),x=a(7438),h=a(3310),g=a(4022);let f=i.memo((0,i.forwardRef)(function(e,t){let{gameId:a,gameTitle:r,onBack:f}=e,[y,u]=(0,i.useState)([]),[b,v]=(0,i.useState)(!0),[j,N]=(0,i.useState)(null),[w,k]=(0,i.useState)(!1);(0,i.useImperativeHandle)(t,()=>({focusProp:e=>{for(let s of y){let i=s.props.find(t=>t.propType===e);if(i){var t;let e={id:"".concat(s.playerId,"_").concat(i.propType),gameId:a,player:s.playerName,team:s.team,market:i.propLabel,marketLine:i.marketLine,fairLine:i.fairLine,edgePct:i.edgePct,confidence:"high"===i.confidence?.9:"med"===i.confidence?.75:.6,bullets:(null===(t=i.bullets)||void 0===t?void 0:t.map(e=>e.title))||[],analysis:i.analysis};N(e),k(!0);break}}}})),(0,i.useEffect)(()=>{fetch("/api/insights/".concat(a)).then(async e=>{let t=await e.json();return console.debug("[GameDashboard] /api/insights response",{gameId:a,json:t}),t}).then(e=>{if(e.players)u(e.players);else if(e.insights){let t=new Map;e.insights.forEach(e=>{t.has(e.playerId)||t.set(e.playerId,{playerId:e.playerId,playerName:e.player,team:e.team,position:e.position,props:[]});let a=e.propType.split("_").map(e=>e.charAt(0).toUpperCase()+e.slice(1)).join(" "),s="med";e.confidence>=90?s="high":e.confidence<70&&(s="low");let i=e.bullets.map(e=>"string"==typeof e?{title:e}:e);t.get(e.playerId).props.push({propType:e.propType,propLabel:a,marketLine:e.marketLine,fairLine:e.fairLine,edgePct:e.edge,confidence:s,bullets:i,analysis:e.analysis})}),u(Array.from(t.values()))}else if(e.props){let t=new Map;e.props.forEach(e=>{t.has(e.playerId)||t.set(e.playerId,{playerId:e.playerId,playerName:e.playerName||e.player,team:e.team,position:e.position,props:[]}),t.get(e.playerId).props.push({propType:e.propType||e.stat,propLabel:e.propLabel||e.label,marketLine:e.marketLine||e.line,fairLine:e.fairLine,edgePct:e.edgePct||e.edge,confidence:e.confidence||"med",bullets:e.bullets||[]})}),u(Array.from(t.values()))}v(!1)}).catch(e=>{console.error("Failed to load from insights API, trying props API:",e),fetch("/api/games/".concat(a,"/props")).then(async e=>{let t=await e.json();return console.debug("[GameDashboard] fallback /api/games/[gameId]/props response",{gameId:a,json:t}),t}).then(e=>{if(e.props){let t=new Map;e.props.forEach(e=>{t.has(e.playerId)||t.set(e.playerId,{playerId:e.playerId,playerName:e.playerName||e.player,team:e.team,position:e.position,props:[]}),t.get(e.playerId).props.push({propType:e.propType||e.stat,propLabel:e.propLabel||e.label,marketLine:e.marketLine||e.line,fairLine:e.fairLine,edgePct:e.edgePct||e.edge,confidence:e.confidence||"med",bullets:e.bullets||[]})}),u(Array.from(t.values()))}v(!1)}).catch(e=>{console.error("Both APIs failed:",e),v(!1)})})},[a]);let L=(e,t,s,i)=>{var l;let r={id:"".concat(e,"_").concat(s.propType),gameId:a,player:t,team:i,market:s.propLabel,marketLine:s.marketLine,fairLine:s.fairLine,edgePct:s.edgePct,confidence:"high"===s.confidence?.9:"med"===s.confidence?.75:.6,bullets:(null===(l=s.bullets)||void 0===l?void 0:l.map(e=>e.title))||[],analysis:s.analysis};N(r),k(!0)};return b?(0,s.jsx)(x.Vw,{children:(0,s.jsxs)(h.n1,{children:[(0,s.jsxs)(l.E.div,{className:"mb-8 flex items-center gap-4",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:g.Vv,children:[(0,s.jsxs)(l.E.button,{onClick:f,className:"p-3 glass rounded-xl hover:bg-white/20 transition-colors flex items-center gap-2",whileHover:{scale:1.02},whileTap:{scale:.98},transition:g.WD,children:[(0,s.jsx)(n,{className:"w-4 h-4"}),(0,s.jsx)("span",{children:"Back"})]}),(0,s.jsx)(x.M$,{title:"".concat(r," Props"),subtitle:"Loading prop insights and video evidence..."})]}),(0,s.jsx)(l.E.div,{variants:(0,g.j_)(.1),initial:"initial",animate:"animate",className:"grid grid-cols-1 lg:grid-cols-2 xl:grid-cols-3 gap-6",children:Array.from({length:6}).map((e,t)=>(0,s.jsx)(l.E.div,{variants:g.CU,children:(0,s.jsx)(h.Od,{className:"h-40 rounded-2xl"})},t))})]})}):(0,s.jsx)(x.Vw,{children:(0,s.jsxs)(h.n1,{children:[(0,s.jsxs)(l.E.div,{className:"mb-8 flex items-center justify-between",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:g.Vv,children:[(0,s.jsxs)("div",{className:"flex items-center gap-4",children:[(0,s.jsxs)(l.E.button,{onClick:f,className:"p-3 glass rounded-xl hover:bg-white/20 transition-colors flex items-center gap-2 font-medium",whileHover:{scale:1.02},whileTap:{scale:.98},transition:g.WD,children:[(0,s.jsx)(n,{className:"w-4 h-4"}),(0,s.jsx)("span",{children:"Back"})]}),(0,s.jsx)(x.M$,{title:r,subtitle:"Market vs Fair Line Analysis backed by video evidence"})]}),(0,s.jsxs)(l.E.div,{className:"text-right glass rounded-2xl p-4",whileHover:{scale:1.02},transition:g.WD,children:[(0,s.jsx)("div",{className:"text-sm text-white/60 font-medium",children:"Total Props"}),(0,s.jsx)("div",{className:"text-3xl font-bold tabular-nums accent",children:y.reduce((e,t)=>e+t.props.length,0)})]})]}),(0,s.jsxs)(l.E.section,{className:"mb-12",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{...g.Vv,delay:.1},children:[(0,s.jsx)(x.M$,{title:"Top Edge Opportunities",subtitle:"Highest value props based on video analysis and fair line calculation"}),(0,s.jsx)(l.E.div,{variants:(0,g.j_)(.1),initial:"initial",animate:"animate",className:"grid grid-cols-1 sm:grid-cols-2 xl:grid-cols-3 gap-4 md:gap-6",children:y.flatMap(e=>e.props.map(t=>({...t,playerId:e.playerId,playerName:e.playerName,team:e.team,position:e.position}))).sort((e,t)=>Math.abs(t.edgePct)-Math.abs(e.edgePct)).slice(0,3).map((e,t)=>{let a=e.edgePct>=0;return(0,s.jsx)(l.E.div,{variants:g.CU,children:(0,s.jsxs)(h.zs,{elevated:!0,onClick:()=>L(e.playerId,e.playerName,e,e.team),className:"p-5 md:p-6 cursor-pointer group overflow-hidden relative min-h-[148px] flex flex-col justify-between",children:[(0,s.jsxs)("div",{className:"absolute top-4 left-4 w-8 h-8 rounded-full glass-strong flex items-center justify-center text-sm font-bold text-white",children:["#",t+1]}),(0,s.jsx)("div",{className:"absolute inset-0 bg-gradient-to-r from-transparent via-white/[0.02] to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-500"}),(0,s.jsxs)("div",{className:"relative z-10 pt-6",children:[(0,s.jsxs)("div",{className:"flex items-start justify-between gap-3 mb-4",children:[(0,s.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,s.jsx)(l.E.div,{className:"font-bold text-white text-base md:text-lg mb-1 truncate",whileHover:{x:2},transition:{type:"spring",stiffness:400,damping:25},children:e.playerName}),(0,s.jsxs)("div",{className:"text-sm text-white/60 flex items-center gap-2",children:[(0,s.jsx)("span",{className:"font-medium",children:e.team}),(0,s.jsx)("span",{className:"w-1 h-1 rounded-full bg-white/30"}),(0,s.jsx)("span",{children:e.propLabel})]})]}),(0,s.jsxs)("div",{className:"text-right flex flex-col items-end gap-1",children:[(0,s.jsx)(h.T4,{value:e.edgePct,className:"text-lg md:text-xl"}),(0,s.jsx)(l.E.div,{className:"text-[11px] text-white/50 font-medium px-2 py-1 rounded-md glass-subtle",whileHover:{scale:1.05},transition:{type:"spring",stiffness:400,damping:25},children:e.confidence.toUpperCase()})]})]}),(0,s.jsxs)("div",{className:"flex items-stretch gap-2",children:[(0,s.jsxs)("div",{className:"flex-1 flex items-center justify-center rounded-lg border border-white/15 glass-subtle px-2 py-1.5",children:[(0,s.jsx)("span",{className:"text-[10px] text-white/40 mr-1",children:"M"}),(0,s.jsx)("span",{className:"font-semibold tabular-nums text-sm",children:e.marketLine})]}),(0,s.jsxs)("div",{className:"flex-1 flex items-center justify-center rounded-lg border border-white/15 glass-subtle px-2 py-1.5",children:[(0,s.jsx)("span",{className:"text-[10px] text-white/40 mr-1",children:"F"}),(0,s.jsx)("span",{className:"font-semibold tabular-nums text-sm",children:e.fairLine})]}),(0,s.jsx)("div",{className:"flex-1 flex items-center justify-center rounded-lg border px-2 py-1.5 font-bold text-sm ".concat(a?"border-green-400/30 text-green-300 bg-green-400/5":"border-red-400/30 text-red-300 bg-red-400/5"),children:a?"OVR":"UND"})]})]}),(0,s.jsx)(l.E.div,{className:"absolute bottom-2 right-2 w-6 h-6 rounded-full glass-subtle flex items-center justify-center opacity-0 group-hover:opacity-100",whileHover:{scale:1.1},transition:{duration:.2},children:(0,s.jsx)("svg",{className:"w-3 h-3 text-white/50",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})})]})},"".concat(e.playerId,"-").concat(e.propType))})})]}),(0,s.jsxs)(l.E.section,{className:"space-y-8",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{...g.Vv,delay:.2},children:[(0,s.jsx)(x.M$,{title:"All Players & Props",subtitle:"Complete breakdown with video evidence for each prop bet"}),(0,s.jsx)(l.E.div,{variants:(0,g.j_)(.1),initial:"initial",animate:"animate",className:"space-y-8",children:y.map(e=>(0,s.jsx)(l.E.div,{variants:g.CU,children:(0,s.jsxs)("div",{className:"glass rounded-3xl p-8",children:[(0,s.jsxs)(l.E.div,{className:"flex items-center gap-6 mb-8",whileHover:{x:4},transition:g.WD,children:[(0,s.jsx)(l.E.div,{className:"w-16 h-16 bg-gradient-to-br from-[var(--mint)] to-[var(--iris)] rounded-2xl flex items-center justify-center text-xl font-bold shadow-lg",whileHover:{scale:1.1,rotate:5},transition:g.WD,children:e.playerName.split(" ").map(e=>e[0]).join("")}),(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsx)("h3",{className:"text-2xl font-bold text-white",children:e.playerName}),(0,s.jsxs)("p",{className:"text-white/60 font-medium",children:[e.position," • ",e.team]})]}),(0,s.jsxs)(l.E.div,{className:"text-right glass-subtle rounded-2xl p-4",whileHover:{scale:1.05},transition:g.WD,children:[(0,s.jsx)("div",{className:"text-sm text-white/60 font-medium",children:"Props Available"}),(0,s.jsx)("div",{className:"text-2xl font-bold accent tabular-nums",children:e.props.length})]})]}),(0,s.jsx)(l.E.div,{variants:(0,g.j_)(.05),initial:"initial",animate:"animate",className:"grid grid-cols-1 sm:grid-cols-2 xl:grid-cols-3 gap-4",children:e.props.map(t=>{let a=t.edgePct>=0;return(0,s.jsx)(l.E.div,{variants:g.CU,children:(0,s.jsxs)(h.zs,{elevated:!0,onClick:()=>L(e.playerId,e.playerName,t,e.team),className:"p-5 cursor-pointer group overflow-hidden relative",children:[(0,s.jsx)("div",{className:"absolute inset-0 bg-gradient-to-r from-transparent via-white/[0.02] to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-300"}),(0,s.jsxs)("div",{className:"relative z-10",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,s.jsx)(l.E.span,{className:"px-3 py-1.5 rounded-xl text-xs font-bold border ".concat("high"===t.confidence?"bg-green-500/20 text-green-400 border-green-500/30":"med"===t.confidence?"bg-yellow-500/20 text-yellow-400 border-yellow-500/30":"bg-white/10 text-white/60 border-white/20"),whileHover:{scale:1.05},transition:g.WD,children:t.confidence.toUpperCase()}),(0,s.jsx)("div",{className:"flex items-center gap-1",children:Math.abs(t.edgePct)>10?(0,s.jsx)(o.Z,{className:"w-4 h-4 text-green-500"}):Math.abs(t.edgePct)>5?(0,s.jsx)(c,{className:"w-4 h-4 text-yellow-500"}):(0,s.jsx)(d.Z,{className:"w-4 h-4 text-gray-400"})})]}),(0,s.jsxs)("div",{className:"text-left mb-4",children:[(0,s.jsx)("div",{className:"font-bold text-white mb-2 text-lg",children:t.propLabel}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-3 mb-3",children:[(0,s.jsxs)("div",{className:"text-center p-2 rounded-lg glass-subtle",children:[(0,s.jsx)("div",{className:"text-[10px] text-white/40 mb-1",children:"Market"}),(0,s.jsx)("div",{className:"font-bold tabular-nums",children:t.marketLine})]}),(0,s.jsxs)("div",{className:"text-center p-2 rounded-lg glass-subtle",children:[(0,s.jsx)("div",{className:"text-[10px] text-white/40 mb-1",children:"Fair"}),(0,s.jsx)("div",{className:"font-bold tabular-nums",children:t.fairLine})]})]}),(0,s.jsxs)(l.E.div,{className:"text-center py-2 px-3 rounded-xl font-bold text-sm ".concat(a?"bg-green-500/20 text-green-400 border border-green-500/30":"bg-red-500/20 text-red-400 border border-red-500/30"),whileHover:{scale:1.02},transition:g.WD,children:[a?"OVER":"UNDER"," ",Math.abs(t.edgePct).toFixed(1),"%"]})]})]}),(0,s.jsx)(l.E.div,{className:"absolute bottom-2 right-2 w-6 h-6 rounded-full glass-subtle flex items-center justify-center opacity-0 group-hover:opacity-100",whileHover:{scale:1.1},transition:{duration:.2},children:(0,s.jsx)(p,{className:"w-3 h-3 text-white/50"})})]})},t.propType)})})]})},e.playerId))})]}),(0,s.jsx)(m.default,{edge:j,gameTitle:r,open:w,onClose:()=>k(!1)})]})})}));var y=f}}]);